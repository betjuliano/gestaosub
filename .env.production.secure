# ===========================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ===========================================
# This file contains production-ready environment variables
# Copy to .env.production and configure with actual values

# ===========================================
# APPLICATION CONFIGURATION
# ===========================================
NODE_ENV=production
PORT=3000
APP_URL=https://gestaodeartigos.iaprojetos.com.br

# ===========================================
# DATABASE CONFIGURATION (PostgreSQL)
# ===========================================
# Use Docker secrets for sensitive database credentials
DATABASE_URL=postgresql://gestaosub_user:${DB_PASSWORD}@db:5432/gestaosub?sslmode=require&connect_timeout=10

# PostgreSQL Connection Pool Settings (Production Optimized)
DB_POOL_SIZE=20
DB_POOL_MIN=5
DB_POOL_IDLE_TIMEOUT=30000
DB_CONNECT_TIMEOUT=10000
DB_SSL=require

# ===========================================
# SECURITY CONFIGURATION
# ===========================================
# Use Docker secrets for sensitive keys
JWT_SECRET=${JWT_SECRET}
COOKIE_SECRET=${COOKIE_SECRET}

# Cookie Security Settings
COOKIE_NAME=gestaosub-auth
COOKIE_DOMAIN=gestaodeartigos.iaprojetos.com.br
COOKIE_SECURE=true
COOKIE_HTTPONLY=true
COOKIE_SAMESITE=strict
COOKIE_MAX_AGE=604800000

# Session Configuration
SESSION_TIMEOUT=7d
JWT_EXPIRES_IN=7d

# ===========================================
# CORS CONFIGURATION
# ===========================================
CORS_ORIGIN=https://gestaodeartigos.iaprojetos.com.br
CORS_CREDENTIALS=true
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,Accept,Origin

# ===========================================
# RATE LIMITING CONFIGURATION
# ===========================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# API Rate Limiting (more restrictive)
API_RATE_LIMIT_WINDOW_MS=60000
API_RATE_LIMIT_MAX_REQUESTS=30

# ===========================================
# SECURITY HEADERS CONFIGURATION
# ===========================================
ENABLE_SECURITY_HEADERS=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# Content Security Policy
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self' 'unsafe-inline' 'unsafe-eval'
CSP_STYLE_SRC='self' 'unsafe-inline'
CSP_IMG_SRC='self' data: https:
CSP_FONT_SRC='self' https:
CSP_CONNECT_SRC='self' https:

# ===========================================
# LOGGING AND MONITORING
# ===========================================
LOG_LEVEL=info
LOG_FORMAT=json
ENABLE_REQUEST_LOGGING=true
ENABLE_ERROR_LOGGING=true
LOG_ROTATION=true
LOG_MAX_SIZE=100mb
LOG_MAX_FILES=10

# Health Check Configuration
HEALTH_CHECK_TIMEOUT=5000
ENABLE_METRICS=true
METRICS_PORT=9090

# ===========================================
# EXTERNAL SERVICES (OPTIONAL)
# ===========================================
# AWS S3 Configuration (use Docker secrets)
STORAGE_TYPE=s3
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_REGION=us-east-1
AWS_S3_BUCKET=gestaosub-files

# Email Configuration (use Docker secrets)
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=${SMTP_USER}
SMTP_PASS=${SMTP_PASS}
SMTP_FROM=noreply@gestaodeartigos.iaprojetos.com.br

# OAuth Configuration (use Docker secrets)
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
OAUTH_REDIRECT_URI=https://gestaodeartigos.iaprojetos.com.br/auth/callback

# LLM Configuration (use Docker secrets)
OPENAI_API_KEY=${OPENAI_API_KEY}
ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
LLM_PROVIDER=openai

# ===========================================
# PERFORMANCE CONFIGURATION
# ===========================================
# Node.js Performance Settings
NODE_OPTIONS=--max-old-space-size=2048
UV_THREADPOOL_SIZE=16

# Compression
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6

# Cache Configuration
CACHE_TTL=3600
STATIC_CACHE_MAX_AGE=31536000

# ===========================================
# DOCKER SECRETS REFERENCES
# ===========================================
# These variables will be populated from Docker secrets
# DB_PASSWORD_FILE=/run/secrets/db_password
# JWT_SECRET_FILE=/run/secrets/jwt_secret
# COOKIE_SECRET_FILE=/run/secrets/cookie_secret
# AWS_ACCESS_KEY_ID_FILE=/run/secrets/aws_access_key_id
# AWS_SECRET_ACCESS_KEY_FILE=/run/secrets/aws_secret_access_key
# SMTP_USER_FILE=/run/secrets/smtp_user
# SMTP_PASS_FILE=/run/secrets/smtp_pass
# GOOGLE_CLIENT_SECRET_FILE=/run/secrets/google_client_secret
# OPENAI_API_KEY_FILE=/run/secrets/openai_api_key